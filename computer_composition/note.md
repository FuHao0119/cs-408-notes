# 第一章计算机系统概述
> 如何考这方面内容?
* 基本概念: 冯诺依曼计算机结构的五个特点、程序编译的执行过程
* 性能指标的计算：CPI(每个指令执行需要的时钟周期数)、IPS(每秒执行的指令数)

用一个例子来讲解机组学什么内容，这里有一个C文件 hello.c:
```c
#include <stdio.h>
int main(){
  printf("hello world");
  return 0;
}
```

这个文件是存放在硬盘中的，在目录下执行 gcc -o hello hello.c 就会生产hello.exe的可执行程序 
这个文件当中存放的是一系列指令
当我们直接使用hello.exe命令执行它，计算机内部是这样执行程序的:

1. 在键盘中输入"hello.exe"时，这个字符串会暂时存放在键盘控制器
2. 命令解释程序(sh/cmd)会通过总线将字符串读入到CPU的寄存器中
3. CPU再通过总线把字符串存入到主寄存器中(内存条中) 
在主存中有很多存储单元，每个存储单元都有他的地址
4. 命令解释程序会从硬盘中加载hello.exe程序, 通过总线把当中的指令加载到主存中
5. CPU会从第一条指令开始，通过存储单元地址依次执行指令
6. CPU会经过一系列指令把"hello world"这个字符串通过总线送到图形控制器中将数据显示出来

目前可以把主存理解为字节数组:
下标  数据 
0       01101000
1       01101001
2       01101010
3       01101110



## 进制转换

二进制转十进制: 01101000 = 0x2^8 + 1x2^7 + 1x2^6 + ...  = 26729
1001B：后缀为B,这是个二进制数

十进制转二进制: 方法是除基取余，上右下左 

<img src="./images/img1.png" alt="image-20260111145320332" style="zoom:25%;" />

16->2 : 可以使用4个二进制位来表示一个十六进制位

16->10: 按权展开 (H是十六进制的标志)

```
13DH = 1*(16^2) + 3*(16^1) + D*(16^0) = 317
```

10->16: 同10转2



## 指令的设计和执行过程

一条指令包括 操作码+地址码

eg: 0000 0011 0000 0110 这条指令的前四位0000是操作码 剩下的是地址码

我们可以定义一个表来表示所有操作码是做什么的

| 操作码 | 操作类型 |
| ------ | -------- |
| 0000   | 取数指令 |
| 0001   | 存数指令 |
| 0010   | 加法操作 |
| 0011   | 乘法操作 |
| 0100   | 打印操作 |
| 0101   | 停机操作 |
| ...    | ....     |

如果我们想把主存地址为7的储存单元中的数据加载到1号寄存器中，就可以使用这个指令: 0000 0001 0000 0111 

0000为取数指令  0001为目的地址码：表示加载到地址为1的寄存器中

0000 0111为源操作数地址码：表示从主存地址为7的地方取数



假设我们要计算ax+b的结果，a的值为5,地址为0001 0010B, x的值为6,地址为0001 0011B, b的值为12,地址为0001 0100B

需要执行如下操作:

1. 取数，将a放到0号寄存器

   0000 0000 0001 0010

2. 取数，将x放到1号寄存器

   0000 0001 0001 0011

3. 乘法，将0号寄存器和1号寄存器的值进行乘法操作，结果存到0号寄存器

   0011 0000 0000 0001

4. 取数，将b放到1号寄存器

   0000 0001 0001 0100

5. 加法，将0号寄存器和1号进行加法操作，结果放到0号寄存器中

   0010 0000 0000 0001

6. 存数，将0号寄存器的值存入到地址为0001 0101的存储单元中

​	0001 0001 0101 0000  (目的地址码0001 0101 要在源地址码的前面)
